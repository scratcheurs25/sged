pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
px = 64
py = 120
ex = rnd(120)
ey = 0

dd = false
rocks = {}

function is_colliding(x1, y1, w1, h1, x2, y2, w2, h2)
  return x1 < x2 + w2 and
         x2 < x1 + w1 and
         y1 < y2 + h2 and
         y2 < y1 + h1
end

function add_to_rocks(value)
  rocks[#rocks + 1] = value
end

function remove_from_rocks(index)
  for i = index, #rocks - 1 do
    rocks[i] = rocks[i + 1]
  end
  rocks[#rocks] = nil
end

function _draw()
  cls(1)
  spr(1, px, py)
  spr(2, ex, ey)
  for i = #rocks, 1, -1 do
    local e = rocks[i]
    if e then
      spr(3, e.x, e.y)
      e.y -= 5
      if e.y < 0 then
        remove_from_rocks(i)
      end
      if is_colliding(e.x, e.y, 6, 8, ex, ey, 8, 8) then
        ex = rnd(120)
        ey = 0
        remove_from_rocks(i)
      end
    end
  end
end

function _update()
  if btn(➡️) then
    px += 5
  end
  if btn(⬅️) then
    px -= 5
  end
  if btn(⬆️) and not dd then
    dd = true
    add_to_rocks({x = px, y = py})
  else
    if not btn(⬆️) then
      dd = false
    end
  end
  ey += 1
  if ey > 128 then
    run() -- restart the program
  end
end

__gfx__
00000000000990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005995000055550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070005aaaa500588885000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700005a1a1500588885000055000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700005aaaa500518185000055000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070005aaaa500588885000555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005555000059950000565000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000009900000565500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

